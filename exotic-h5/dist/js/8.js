webpackJsonp([8],{101:function(t,e,i){"use strict";var o=i(17),n=i(67),a=i(14);e.a={created:function(){var t=this,e={zh_CN:{messages:{email:function(){return"邮箱格式不正确哦"},required:function(t){return t+"不能为空"},numeric:function(t){return t+"不是数字"}},attributes:{specTitle:"规格组名称"}}};o.a.localize(e),void 0!=this.$route.query.type&&(this.Type=parseInt(this.$route.query.type)),void 0!=this.$route.query.id&&(this.id=parseInt(this.$route.query.id)),void 0!=this.$route.query.token&&(this.token=this.$route.query.token),2==this.Type&&(t.title="修改规格",t.MintUi.Indicator.open({text:"加载中...",spinnerType:"fading-circle"}),a.a.ajaxData(t.token,a.a.urlMap.specifitioin.detail,{specificationId:t.id},"get",function(e){console.log(e),t.specTitle=e.name,t.specSort=e.orders;var i=0;t.list=[];for(var o in e.specificationValues){if(o==e.specificationValues.length-1){i++,t.list.push({id:e.specificationValues[o].specificationNameId,option:e.specificationValues[o].specificationValue,optionOrders:e.specificationValues[o].orders,specificationCode:e.specificationValues[o].specificationCode,type:!0});break}i++,t.list.push({id:e.specificationValues[o].specificationNameId,option:e.specificationValues[o].specificationValue,optionOrders:e.specificationValues[o].orders,specificationCode:e.specificationValues[o].specificationCode,type:!0})}console.log(t.list),t.indexNum=i,t.MintUi.Indicator.close()}))},data:function(){return{token:null,Type:1,id:null,title:"添加规格组",specTitle:"",specSort:"",indexNum:"1",nullTrue:!1,list:[{id:0,option:"",optionOrders:"1"}]}},methods:{addspec:function(){var t=this;this.indexNum++,this.list.push({id:(new Date).getTime()+""+(9e5*Math.random()+1e5),option:"",optionOrders:t.indexNum,type:!1})},removeSpec:function(t){var e=this,i=n.a.contains(e.list,t.id,"id");e.list.splice(i,1)},removeSpecSub:function(t){var e=this,i={specificationId:t.id,itemValue:t.option,itemCode:t.specificationCode};if(this.list.length<2)return void a.a.tip({txt:"至少保留一条规格值记录"});if(0==t.type){var o=n.a.contains(e.list,t.specificationCode,"specificationCode");e.list.splice(o,1)}else e.MintUi.MessageBox.confirm("确定删除?").then(function(o){var s=n.a.contains(e.list,t.specificationCode,"specificationCode");e.MintUi.Indicator.open({text:"删除中...",spinnerType:"fading-circle"}),a.a.ajaxData(e.token,a.a.urlMap.specifitioin.delete,i,"post",function(t){a.a.tip({txt:t.message}),e.MintUi.Indicator.close(),e.list.splice(s,1);var i=navigator.userAgent,o=i.indexOf("Android")>-1||i.indexOf("Adr")>-1;!i.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)?o&&(window.location.href="fenzu://jscome/backToPrevPage?update=17"):window.location.href="#SuccessToPrevPage*arg=0"})},function(t){console.log(t)})},focusEditSpec:function(t,e){var i=this;1==e.type&&a.a.ajaxData(i.token,a.a.urlMap.specifitioin.contrast,{spcode:e.specificationCode},"get",function(e){1==e.isUsed?(a.a.tip({txt:"有商品引用，不能编辑！"}),t.target.dataset.edit="false",t.target.blur()):e.isUsed})},editSpec:function(t,e){var i=this;if(1==e.type){var o=t.target.dataset.edit;"false"==o||"true"==o&&a.a.ajaxData(i.token,a.a.urlMap.specifitioin.edit,{specificationCode:e.specificationCode,orders:t.target.nextElementSibling.value,specificationValue:t.target.value},"post",function(t){0==t.code&&a.a.tip({txt:"规格值修改成功!"})})}},focusEditStock:function(t,e){var i=this;1==e.type&&a.a.ajaxData(i.token,a.a.urlMap.specifitioin.contrast,{spcode:e.specificationCode},"get",function(e){1==e.isUsed?(a.a.tip({txt:"有商品引用，不能编辑！"}),t.target.dataset.edit="false",t.target.blur()):e.isUsed})},editStock:function(t,e){var i=this;if(1==e.type){var o=t.target.dataset.edit,n=t.target.value;"false"==o||"true"==o&&(isNaN(n)?(a.a.tip({txt:"不是数字"}),t.target.focus(),t.target.value=""):a.a.ajaxData(i.token,a.a.urlMap.specifitioin.edit,{specificationCode:e.specificationCode,orders:n,specificationValue:t.target.previousElementSibling.value},"post",function(t){0==t.code&&a.a.tip({txt:"规格值修改成功!"})}))}},blurInput:function(t){var e=t.target.value;isNaN(e)?(a.a.tip({txt:"不是数字"}),t.target.focus(),this.nullTrue=!0):this.nullTrue=!1},rt:function(){return!0},stext:function(t,e){for(var i=0;i<t.length;i++)if(t[i].value==e.value)return t[i]},ok:function(){var t=this;console.log(this.$data);for(var e=[],i=!1,o=0;o<t.list.length;o++){var n=t.list[o].option,s=parseFloat(t.list[o].optionOrders);e.push({option:n,optionOrders:s}),""!=n&&""!=s||(i=!0)}if(e=JSON.stringify(e),""==t.specTitle)return a.a.tip({txt:"请填写规格组名称"}),!1;if(i)return a.a.tip({txt:"请填写规格值"}),!1;if(1==t.Type){var r={name:t.specTitle,content:e,orders:t.specSort};t.MintUi.Indicator.open({text:"提交中...",spinnerType:"fading-circle"}),a.a.ajaxData(t.token,a.a.urlMap.specifitioin.add,r,"post",function(e){t.MintUi.Indicator.close(),a.a.tip({txt:"添加规格成功"});var i=navigator.userAgent,o=i.indexOf("Android")>-1||i.indexOf("Adr")>-1;!i.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)?o&&(window.location.href="fenzu://jscome/backToPrevPage?update=15"):window.location.href="#SuccessToPrevPage*arg=0"})}else if(2==t.Type){for(var c=[],p=[],l=!1,d=!1,o=0;o<t.list.length;o++)if(0==t.list[o].type){var n=t.list[o].option,s=parseFloat(t.list[o].optionOrders);c.push({option:n,optionOrders:s}),""!=n&&""!=s||(l=!0)}else p.push(t.list[o]);for(var o=0;o<t.list.length;o++)if(0==t.list[o].type){d=!0;break}for(var f=0;f<p.length&&c!=[];f++)for(var u=0;u<c.length;u++)p[f].option==c[u].option&&c.splice(u,1);if(l)return a.a.tip({txt:"请填写规格值"}),!1;var g=JSON.stringify(c);if(""==c&&1==d)a.a.tip({txt:"新增规格重复"});else{var r={specificationId:t.id,name:t.specTitle,content:g,orders:t.specSort};console.log(r),t.MintUi.Indicator.open({text:"提交中...",spinnerType:"fading-circle"}),a.a.ajaxData(t.token,a.a.urlMap.specifitioin.update,r,"post",function(e){t.MintUi.Indicator.close(),a.a.tip({txt:"修改规格成功"});var i=navigator.userAgent,o=i.indexOf("Android")>-1||i.indexOf("Adr")>-1;!i.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)?o&&(window.location.href="fenzu://jscome/backToPrevPage?update=15"):window.location.href="#SuccessToPrevPage*arg=0"})}}}},mounted:function(){}}},146:function(t,e,i){var o=i(147);"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);i(4)("102a692a",o,!0,{})},147:function(t,e,i){var o=i(15);e=t.exports=i(3)(!1),e.push([t.i,"header{background-color:#fff;color:#000;height:3.5rem;display:flex;justify-content:space-around;border-bottom:1px solid #e8e6e6}header .back{width:3.5rem;height:3.5rem;background-image:url("+o(i(68))+");background-repeat:no-repeat;background-position:50%;background-size:1.5rem}header .header-title{font-size:1.4rem;line-height:3.5rem;flex:1;text-align:center}header .header-more{width:3.5rem}.content{width:100%}.section,.section .item{position:relative}.section .item{display:block;padding:10px 0;border-bottom:1px solid #f7f7f7;min-height:24px;overflow:hidden;margin:0 5px 0 0}.section .item i.tip{width:100%;float:left;height:24px;line-height:24px;display:block;font-size:14px;color:red;font-style:normal}.section .item .button{width:100%;padding:10px 0;background-color:#e56fa6;color:#fff;border-radius:5px;outline:none;font-size:14px;border:0}.section .item .button:active{background-color:#de669e}.section .item label{line-height:26px;width:70px;height:24px;font-size:14px;color:#666;display:block;position:absolute;left:10px;top:10px}.section .item label span{color:#f00000;font-size:14px;line-height:24px;display:inline-block}.section .item label i{width:18px;height:18px;margin-bottom:-5px;display:inline-block;background-image:url("+o(i(69))+");background-position:50%;background-repeat:no-repeat;background-size:18px}.section .item label i.active{background-image:url("+o(i(70))+")}.section .item span.flex-box{display:block;overflow:hidden}.section .item span.goods-fill-in{position:relative}.section .item span.goods-fill-in .fle{width:40%;margin:0;font-size:14px}.section .item span.goods-fill-in .slimw{width:10%;line-height:26px;text-align:center}.section .item span.goods-fill-in .btomr{width:10px;height:10px;display:block;background-image:url("+o(i(16))+");background-repeat:no-repeat;background-position:100% 100%;position:absolute;background-size:7px;bottom:0;right:0;z-index:2}.section .item span.goods-fill-in div{margin:0 .5%;width:32.33%;float:left}.section .item span.goods-fill-in div input[type=text]{background-color:#f5f5f5;text-indent:8px}.section .item span.goods-fill-in div button{width:100%;text-align:left;outline:none;height:26px;padding:2px 0;display:block;margin:0;border:0;font-size:14px;background:none}.section .item span.goods-fill-in div button.right{text-align:right}.section .item span.goods-fill-in div button.input{outline:none;width:70%;float:right;background-color:#e56fa6;color:#fff;border-radius:3px;text-align:center}.section .item span.goods-fill-in div button.input:active{background-color:#de669e}.section .item span.start{min-height:26px}.section .item>span{margin-left:80px;display:block}.section .item>span input{outline:none;line-height:26px;height:26px;padding:0;margin:0;display:block;border:0;width:100%;font-size:14px}.section .item>span input.feilei{background:transparent;text-align:left}.section .item>span i.tip{width:100%;float:left;height:24px;line-height:24px;display:block;font-size:14px;color:red;font-style:normal}.section .item>span textarea{outline:none;padding:0;margin:0;display:block;border:0;width:100%;font-size:14px}.section .item>span .time-add{width:100%;overflow:hidden}.section .item>span .time-add button{outline:none;width:62px;height:30px;display:block;float:left;background-color:#e56fa6;color:#fff;border:0;font-size:14px;border-radius:3px}.section .item>span .time-add span{line-height:34px;display:block;float:left;margin-left:10px;font-size:14px;color:#333}.section .item>span .time-c-box{overflow:hidden}.section .item>span .time-c-box .time-item{overflow:hidden;margin-top:10px}.section .item>span .time-c-box .time-item input{height:30px;display:block;border:1px solid #ccc;border-radius:4px;text-align:center;width:62px;float:left;background-color:#fff}.section .item>span .time-c-box .time-item span{display:block;float:left;line-height:30px;text-align:center;padding:0 5px}.section .item>span .time-c-box .time-item i{width:30px;height:30px;display:block;float:left;margin-left:10px;margin-top:0;background:url("+o(i(71))+") no-repeat 50%;background-size:24px}.section .item>span .flex-box{display:block}.section .item>span .type-t{padding:4px 0;padding-bottom:10px}.section .item>span .type-t i{background-size:100%;background-repeat:no-repeat;background-position:50%;width:40px;height:40px;margin-right:20px;display:block}.section .item>span .type-t i:first-child{background-image:url("+o(i(72))+")}.section .item>span .type-t i:nth-child(2){background-image:url("+o(i(73))+")}.section .item>span .type-t i.active{box-shadow:2px 2px 2px #aaa}.section .item>span .goods-color{height:30px;padding:0 15px;line-height:30px;margin-right:12px;margin-bottom:10px;border-radius:3px;border:1px solid #ccc;background-color:#fff;color:#c1c1c1;font-size:14px}.section .item>span .goods-color.nomargin{margin-bottom:0}.section .item>span .goods-color.active{border:1px solid #e56fa6;background-color:#e56fa6;color:#fff}.section .item>span .goods-img{float:left;padding:5px;position:relative;height:auto}.section .item>span .goods-img i{position:absolute;width:20px;height:20px;background-repeat:no-repeat;background-image:url("+o(i(74))+");background-position:50%;background-size:16px;display:block;top:-3px;right:-1px}.section .item>span .goods-img i.true{background-image:url("+o(i(75))+")}.section .item>span .goods-img i.false{background-image:url("+o(i(76))+');background-size:16px}.section .item>span .goods-img img{display:block;height:50px}.section .item>span .goods-img span{font-size:14px}.section .item>span .clear{clear:left;float:none;overflow:hidden;display:block}.section .noMin{min-height:auto}.section .noneBor{border:0;padding:10px 0}.section .nb{border:0}.section:before{height:10px}.section:before,.section:first-child::before{width:100%;content:"";display:block;background-color:#f7f7f7;top:0}.section:first-child::before{height:0}.pup{padding:15px 1px;text-align:center;border-bottom:1px solid #f1f1f1}ul.listul{background-color:#fff;width:100%;max-height:300px;overflow-y:auto}ul.listul li{line-height:30px;font-size:14px;padding:5px 15px;position:relative;border-bottom:1px solid #f1f1f1}ul.listul li.active:after{position:absolute;content:"";width:16px;height:16px;bottom:14px;display:block;right:15px;background-image:url('+o(i(77))+");background-position:50%;background-size:100%;background-repeat:no-repeat}.queding{overflow:hidden;width:100%}.queding button{margin:20px auto;padding:8px 0;width:80%;display:block;text-align:center;background-color:#e56fa6;color:#fff;border-radius:5px;outline:none;font-size:14px;border:0}.queding button:active{background-color:#de669e}.mint-datetime-action{font-size:14px;color:#e56fa6}.mint-datetime-cancel{color:#000}.ql-snow .ql-toolbar button svg,.quillWrapper .ql-snow.ql-toolbar button svg{width:20px;height:20px}.ql-toolbar.ql-snow .ql-formats{margin-right:0}.mint-msgbox-btn,.picker-slot{font-size:14px}.mint-msgbox-message{font-size:15px}.mint-msgbox-confirm,.mint-msgbox-confirm:active{color:#e56fa6}.mint-toast-text,.picker-item,.picker-slot{font-size:14px}.priceInput,.stockInput{width:90%;outline:none;border:0;height:20px;font-size:14px;color:#333;display:block;padding:0}button,input{-webkit-appearance:button;-ms-appearance:button;-moz-appearance:button;appearance:button}.section .item .label b{text-decoration:none;font-style:none;font-weight:400;margin-right:10px;text-align:left;display:block;float:left;font-size:14px}.section .item.noflex{position:static}.section .item.noflex label{position:static;margin-left:10px;height:auto;width:auto}.section .item.noflex span{margin-left:10px;margin-top:10px}.section .item.noflex span .goods-color{margin-bottom:10px;float:left}.section .item.noflex1 span div{float:left;margin-right:8px;padding:0 10px}.pup{width:100%;background-color:rgba(0,0,0,.5);height:100%}.section .submintItem{margin:0 10px}",""])},148:function(t,e,i){"use strict";var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"box"}},[i("div",{staticClass:"content"},[i("div",{staticClass:"section"},[i("div",{staticClass:"item"},[t._m(0),t._v(" "),i("span",[i("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.specTitle,expression:"specTitle"}],attrs:{type:"text",name:"specTitle",id:"specTitle",placeholder:"请输入规格组名称"},domProps:{value:t.specTitle},on:{input:function(e){e.target.composing||(t.specTitle=e.target.value)}}}),t._v(" "),i("i",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("specTitle"),expression:"errors.has('specTitle')"}],staticClass:"tip"},[t._v(t._s(t.errors.first("specTitle")))])])]),t._v(" "),i("div",{staticClass:"item"},[i("label",{attrs:{for:"specSort"}},[t._v("\n                  规格排序\n              ")]),t._v(" "),i("span",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.specSort,expression:"specSort"}],attrs:{type:"number",name:"specSort",id:"specSort",placeholder:"请输入规格排序[0-9]"},domProps:{value:t.specSort},on:{input:function(e){e.target.composing||(t.specSort=e.target.value)}}})])])]),t._v(" "),i("div",{staticClass:"section"},[i("div",{staticClass:"item",staticStyle:{border:"0","margin-bottom":"1rem"}},[i("label",{attrs:{for:"specSort"}}),t._v(" "),i("span",{staticClass:"spec_btn"},[i("button",{staticClass:"button",attrs:{type:"button"},on:{click:t.addspec}},[t._v("增加规格值")])])]),t._v(" "),i("div",{staticClass:"spec_box noneBor"},t._l(t.list,function(e,o){return i("div",{key:o,staticClass:"ggbox"},[t._m(1,!0),t._v(" "),i("div",{staticClass:"input-box"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.option,expression:"item.option"}],staticClass:"gginput",attrs:{"data-edit":!0,"data-code":e.specificationCode,type:"text",name:"spec",placeholder:"请输入规格值"},domProps:{value:e.option},on:{blur:function(i){2==t.Type?t.editSpec(i,e):t.rt()},focus:function(i){2==t.Type?t.focusEditSpec(i,e):t.rt()},input:function(i){i.target.composing||t.$set(e,"option",i.target.value)}}}),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.optionOrders,expression:"item.optionOrders"}],staticClass:"gginput1",attrs:{"data-edit":!0,"data-code":e.specificationCode,maxlength:"9",type:"number",name:"specIndex",placeholder:"序号"},domProps:{value:e.optionOrders},on:{blur:function(i){2==t.Type?t.editStock(i,e):t.blurInput()},focus:function(i){2==t.Type?t.focusEditStock(i,e):t.rt()},input:function(i){i.target.composing||t.$set(e,"optionOrders",i.target.value)}}}),t._v(" "),i("button",{staticClass:"ggbutton",attrs:{"data-id":e.id,disabled:t.list.length<2,"data-code":e.specificationCode},on:{click:function(i){2==t.Type?t.removeSpecSub(e):t.removeSpec(e)}}},[t._v("删除")])])])}))]),t._v(" "),i("div",{staticClass:"section"},[i("div",{staticClass:"item submintItem"},[1==t.Type?i("button",{staticClass:"button",on:{click:t.ok}},[t._v("确定")]):t._e(),t._v(" "),2==t.Type?i("button",{staticClass:"button",attrs:{disabled:t.nullTrue},on:{click:t.ok}},[t._v("保存")]):t._e()])])])])},n=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("label",{attrs:{for:"specTitle"}},[t._v("\n                  规格组名"),i("span",[t._v("*")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",[i("i",{staticClass:"red"},[t._v("*")]),t._v("规格值")])}],a={render:o,staticRenderFns:n};e.a=a},23:function(t,e,i){"use strict";function o(t){i(146)}Object.defineProperty(e,"__esModule",{value:!0});var n=i(101),a=i(148),s=i(5),r=o,c=s(n.a,a.a,!1,r,null,null);e.default=c.exports},67:function(t,e,i){"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n=function(t,e,i){if(i){for(var o=t.length;o--;)if(t[o][i]===e)return o;return"false"}for(var o=t.length;o--;)if(t[o]===e)return o;return"false"},a=function(t,e){if("string"==typeof t)var i=new Date(parseInt(t));else if("object"==(void 0===t?"undefined":o(t)))var i=new Date(t);else var i=new Date(t);var n=i.getFullYear(),a=i.getMonth()+1;a<10&&(a="0"+a);var s=i.getDate();s<10&&(s="0"+s);var r=i.getHours();r<10&&(r="0"+r);var c=i.getMinutes();c<10&&(c="0"+c);var p=i.getSeconds();return p<10&&(p="0"+p),""==e||void 0==e||null==e||"YY-MM-DD hh:mm:ss"==e?n+"-"+a+"-"+s+" "+r+":"+c+":"+p:"YY-MM-DD"==e?n+"-"+a+"-"+s:"YY-MM-DD hh:mm"==e?n+"-"+a+"-"+s+" "+r+":"+c:void 0},s=function(t){var e=[],i=!0,o=!1,n=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var r=a.value;e.unshift(r)}}catch(t){o=!0,n=t}finally{try{!i&&s.return&&s.return()}finally{if(o)throw n}}return e},r=function(t){for(var e=[],i=t.previousSibling;i;)1===i.nodeType&&e.push(i),i=i.previousSibling;e.reverse();for(var o=t.nextSibling;o;)1===o.nodeType&&e.push(o),o=o.nextSibling;return e};e.a={contains:n,siblings:r,getTimes:a,reverseFn:s}},68:function(t,e,i){t.exports=i.p+"icon-left.svg?63f821378f34f73120de85c5f9d8b267"},69:function(t,e,i){t.exports=i.p+"icon-noradio.png?b6281f7d8f2f29dd0cea195436a4c7f8"},70:function(t,e,i){t.exports=i.p+"icon-radio.png?46024ada3fc0f7016b18a0199f1d809a"},71:function(t,e,i){t.exports=i.p+"icon-chan.png?e7fe1ce4d14f5c2b2eae7ab9e775108c"},72:function(t,e,i){t.exports=i.p+"icon-jia.png?94e73b18b32d8e34fd4b0b76bf6c89be"},73:function(t,e,i){t.exports=i.p+"icon-wenzi.png?59d730fdf70c466b3faa1713d4b9a00a"},74:function(t,e,i){t.exports=i.p+"icon-kong.png?d178bffbf05d61c5c4586ffa575e2841"},75:function(t,e,i){t.exports=i.p+"icon-gou.png?ed58dae95645418171a2ef3bcadd13f3"},76:function(t,e,i){t.exports=i.p+"icon-cha.png?db2ddc2f0ccf12a95dfd85b079497cc2"},77:function(t,e,i){t.exports=i.p+"icon-listgou.svg?5a25f723f04832d651639ed1f65ddac9"}});
//# sourceMappingURL=8.js.map?v=7d7ca4e5c6df68685288